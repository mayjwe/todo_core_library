name: CI / Build & Test 
 
on: 
  push: 
    branches: [ master ] 
  pull_request: 
    branches: [ master ] 
 
jobs: 
  build: 
    runs-on: ubuntu-latest 
    steps: 
      - name: Checkout 
        uses: actions/checkout@v4 
 
      - name: Setup .NET 
        uses: actions/setup-dotnet@v3 
        with: 
          dotnet-version: '8.0.x'  
      - name: Cache NuGet packages 
        uses: actions/cache@v4 
        with: 
          path: ~/.nuget/packages 
          key: ${{ runner.os }}-nuget-${{ hashFiles('**/*.csproj', '**/packages.lock.json') }} 
          restore-keys: | 
            ${{ runner.os }}-nuget- 
 
      - name: Restore 
        run: dotnet restore 
 
      - name: Build 
        run: dotnet build --no-restore -c Release 
 
      - name: Test 
        run: dotnet test --no-build -c Release --verbosity normal 
 
      - name: Pack 
        run: dotnet pack Todo.Core/Todo.Core.csproj -c Release -o ./artifacts 
